name: Daily Recap Cron
on:
  schedule:
    # Run every 30 minutes.
    # Logic in API ensures it runs only ONCE per day after the target time.
    - cron: "*/30 * * * *"
  workflow_dispatch: # Enable manual run button

jobs:
  hit-cron:
    runs-on: ubuntu-latest
    steps:
      - name: Call Daily Recap Endpoint
        # Added --fail so curl exits with error code on 404/500
        # Added --show-error to see why it failed
        run: |
          echo "Hitting URL: ${{ secrets.APP_URL }}/api/cron/daily-recap"
          curl --fail --show-error -I "${{ secrets.APP_URL }}/api/cron/daily-recap"
